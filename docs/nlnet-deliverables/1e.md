# 1e. Extended nixOS/Guix and Bonfire federation experiments and documentation

## Notes W/c 21st Sept

- Email system now working on NixOS instances after database reset. We tested successfully with Protonmail and Gmail accounts. We're using the Sendgrid accoutnf that we set up for the main instance
- Cross-instance communication working within fediverse:
  - Mastodon to Bonfire private messages functional
  - Regular posts visible both ways
  - Following Masto and Ghost accounts works
  - Social flavor (dev-discussions) cannot seem to communicate with Open Science flavor (discussions), so we will try and rebuild where both instances run the same version, but it should be the case that any federated activity pub instance can communicate with another

### Next steps
- the ultimate goal is to get Open Science flavor running on NixOS for the project, so we'll focus on that for next week.


## Notes w/c 29th Sept

Successfully deployed OpenScience NixOS flavour at https://dev-discussions.sciety.org. Federation between open-science flavour instances works well. What this means is that users can follow each other across different Bonfire instances and we tested with with Mastodon, Wordpress and Ghost

### Next Steps

- Mark: Set up DigitalOcean access/billing and investigate [Fly.io](http://Fly.io) options
- Giacomo: Document instance setup steps for [1.d](./1c.md) and test DigitalOcean deployment


## Notes w/c 6th Oct

- Giacomo documented complete deployment process in [Bonfire NixOS flake README](https://github.com/bonfire-networks/bonfire-nix)
- Successfully [deployed NixOS using nixos-anywhere on Ubuntu droplet at Digital Ocean](https://github.com/sciety/sciety-bonfire-nix/tree/digitalocean). Instance running but needs domain/certificates for full functionality
  - Key requirements discovered:
    - Minimum 1.5GB RAM needed (1GB crashes during installation),Bonfire itself recommends 8GB for production
    - Current setup working with 25GB SSD storage
    - Connectivity issues when deploying directly with Bonfire flake, the workaround is to deploy with `nixos-anywhere` examples first, then reconfigure

- Discussed adding Zenodo and ORCID integration capabilities to secrets configuration in flake and add a boolean toggle needed for sandbox vs production modes

- Discussed GUIX testing. We successfully tested federation between Giacomo’s Guix instance and Mark’s instance. There is potential to deploy open science flavor on Guix, though ORCID integration may not work (not configurable) but basic testing feasible

### Next steps

**Giacomo:**

- Update deliverables repository with DigitalOcean documentation
- Link DigitalOcean branch in site flake README
- Add ORCID and Zenodo secrets configuration to flake
- Test open science flavor deployment on Guix

**Mark:**

- Test NixOS deployment guide on real machine
- Validate documentation completeness and clarity
